# ğŸ¯ Azure Custom Vision â€“ Object Detection ğŸ§ ğŸ”

## ğŸ“¦ What is Object Detection?

**Object Detection** not only tells you _what_ is in the imageâ€¦ but also _where_ it is.

Itâ€™s like giving your AI **eyes AND a pointing finger** ğŸ‘†.

> â€œThere's a dog ğŸ¶ at (x=53, y=24, width=120, height=90).â€

---

## ğŸ§ª Official Microsoft Definition

> Object detection in **Azure Custom Vision** allows you to **locate and classify multiple objects** within a single image, each with **bounding boxes** and **associated tags**.

---

## ğŸ§  Classification vs. Object Detection

| Feature         | Image Classification     | Object Detection                          |
| --------------- | ------------------------ | ----------------------------------------- |
| Purpose         | Is this image a cat?     | Where are the cats in this image?         |
| Output          | Tags                     | Tags + bounding box (x, y, width, height) |
| Use Case        | Profile photo moderation | Detect cars in parking lot                |
| SDK Differences | `classify_image()`       | `detect_objects()`                        |

---

## ğŸ¯ Common Use Cases

| Use Case               | Example                                      |
| ---------------------- | -------------------------------------------- |
| ğŸ›ï¸ Retail              | Detect product placement in shelf            |
| ğŸš— Smart Vehicles      | Detect pedestrians or traffic signs          |
| ğŸ­ Manufacturing       | Detect defects or missing parts in machinery |
| ğŸ¦ Wildlife Monitoring | Detect animals in camera trap images         |

---

## ğŸ§° Step-by-Step Workflow (Conceptual)

<div align="center">

```mermaid
flowchart TD
    A[ğŸ–¼ï¸ Upload Labeled Images<br>with Bounding Boxes] --> B[ğŸ§  Train Object Detection Model]
    B --> C[ğŸ“Š Evaluate Performance<br>Precision / Recall]
    C --> D[ğŸš€ Publish Model]
    D --> E[ğŸ” Predict New Images<br>Return tags + coordinates]
```

</div>

---

## ğŸ§± Setting Up Object Detection Project

When creating the project in the **Custom Vision Portal**:

1. Select **Project Type** â†’ `Object Detection`
2. Choose **Domain** â†’ `General (Object Detection)` or a domain optimized for your scenario
3. Choose **Multiclass** or **Multilabel** (just like classification)

---

## ğŸ–¼ï¸ Tagging with Bounding Boxes

You must draw **bounding boxes** around objects manually (or with tools), tagging each one with a relevant label.

Each image must:

- Include **at least one object**
- Be **realistic** in size, angle, and lighting
- Have **diverse examples per tag**

ğŸ’¡ Minimum 15 tagged objects per label is recommended.

---

## ğŸ§ª Training the Model

- Training works just like classification: click **"Train"**
- You'll get a model **iteration**
- Model learns:

  - **What the object looks like**
  - **Where itâ€™s located in images**

---

## ğŸ“Š Evaluation Metrics (Exam Tip ğŸ“˜)

| Metric                           | Description                                                    |
| -------------------------------- | -------------------------------------------------------------- |
| **Precision**                    | Of all detected objects, how many were right?                  |
| **Recall**                       | Of all real objects, how many were found?                      |
| **Mean Average Precision (mAP)** | Area under the Precision-Recall curve; key in object detection |

> Higher **mAP** = better localization + tagging

---

## ğŸš€ Publishing and Using the Model

After you're satisfied with results:

1. **Publish the model** to the **Prediction Resource**
2. Use the **Prediction API / SDK** to detect objects in new images

---

## ğŸ¤– Prediction Output â€“ What You Get

Youâ€™ll get a list of detected objects with:

- `tagName`
- `probability`
- `boundingBox` â†’ with `left`, `top`, `width`, `height` (all normalized 0â€“1)

ğŸ§ª Example result:

```json
{
  "tagName": "Car",
  "probability": 0.91,
  "boundingBox": {
    "left": 0.12,
    "top": 0.34,
    "width": 0.25,
    "height": 0.18
  }
}
```

> Youâ€™ll convert these values into pixel dimensions relative to your image size.

---

## âš ï¸ Special Notes for Object Detection

- Bounding boxes must be **tight but not overly tight**
- Donâ€™t mix multiple tags on the same object
- Avoid overfitting with **diverse images** (lighting, backgrounds)
- Set **confidence thresholds** in your app (e.g., only show results > 0.8)

---

## ğŸ§ª SDK Prediction Example (Minimal)

```python
from azure.cognitiveservices.vision.customvision.prediction import CustomVisionPredictionClient

predictor = CustomVisionPredictionClient(prediction_key, endpoint)
results = predictor.detect_image(project_id, "myModel", image_data)

for result in results.predictions:
    print(f"{result.tag_name}: {result.probability}, Box: {result.bounding_box}")
```

---

## ğŸ§© Comparing Object Detection with Image Classification

| Feature                 | Classification            | Object Detection            |
| ----------------------- | ------------------------- | --------------------------- |
| Detect multiple objects | âŒ (multi-label optional) | âœ… Yes                      |
| Localize object         | âŒ                        | âœ… (bounding boxes)         |
| Tag + Location          | Tag only                  | Tag + Position              |
| Input data              | Tagged image              | Tagged image + bounding box |

---

## ğŸ§‘â€ğŸ« AI-102 Learning Tips

| Task                                        | Skill Gained                            |
| ------------------------------------------- | --------------------------------------- |
| Try building both a classifier and detector | Learn the real-world difference         |
| Manually label data in portal               | Understand the pain of data labeling    |
| Tune thresholds in prediction               | Learn to control accuracy tradeoffs     |
| Evaluate precision vs recall                | Be ready for model comparison questions |

---

## ğŸ› ï¸ Real-World Dev Notes

| Concern                   | Solution                                       |
| ------------------------- | ---------------------------------------------- |
| Need real-time detection? | Use smaller models + edge deployment with ONNX |
| Limited data?             | Use **data augmentation** tools                |
| Many object types?        | Use **multi-label object detection**           |

---

## ğŸ” Governance & Cost

- Keys must be rotated securely (use Azure Key Vault)
- Consider prediction cost per 1000 images
- Free tier available (limited # of projects)

---

## ğŸ“š Resources

- [ğŸ§  Custom Vision Portal](https://customvision.ai/)
- [ğŸ› ï¸ SDK Docs â€“ Python](https://learn.microsoft.com/en-us/python/api/overview/azure/cognitiveservices/vision/customvision)
- [ğŸ“˜ REST API â€“ Detect Objects](https://learn.microsoft.com/en-us/rest/api/cognitiveservices/customvision-prediction-api/detectimage)

---

## âœ… Summary â€“ Object Detection with Azure

| Step | Action                          |
| ---- | ------------------------------- |
| 1ï¸âƒ£   | Create Object Detection project |
| 2ï¸âƒ£   | Upload images + draw boxes      |
| 3ï¸âƒ£   | Train model                     |
| 4ï¸âƒ£   | Evaluate using mAP              |
| 5ï¸âƒ£   | Publish and predict             |
