# ğŸ§  Azure AI Language â€“ **Entity Components in Conversational Language Understanding (CLU)**

_A complete guide from basics to exam-ready examples â€“ in your style._

---

## ğŸš€ What Are Entity Components?

In **Conversational Language Understanding (CLU)**, entities are pieces of information we want to extract from a user utterance, like:

- âœˆï¸ "Cairo" â†’ Destination
- ğŸ• "2 PM" â†’ Time
- ğŸŸï¸ "2 tickets" â†’ TicketQuantity

Each **Entity** can include one or more **Components**, which define _how_ CLU will extract that entity.

---

## ğŸ§© The 4 Types of Entity Components

| ğŸ§± Component Type | ğŸ” What it Does                                      | ğŸ§  Smart or Manual? | ğŸ“Œ When to Use                                      |
| ----------------- | ---------------------------------------------------- | ------------------- | --------------------------------------------------- |
| **1. Learned**    | Learns from tagged training utterances using context | ğŸ§  Smart (ML-based) | When meaning depends on _context_                   |
| **2. List**       | Matches fixed values and synonyms you provide        | ğŸ”¤ Manual           | When you know the values (e.g. products, locations) |
| **3. Prebuilt**   | Recognizes common types (date, number, email, etc.)  | ğŸ§  Built-in         | For general entities like time, quantity, name      |
| **4. Regex**      | Matches using regular expressions (patterns)         | ğŸ”£ Manual           | For structured values like invoice numbers, IDs     |

---

## ğŸ” 1. Learned Component

> Machine learning-based prediction using your tagged examples

### âœ… Best For:

- Understanding meaning based on **surrounding words**
- Role-based context (e.g. â€œBook **two** ticketsâ€ â†’ â€œtwoâ€ is TicketQuantity)

### ğŸ§ª Example:

```txt
Utterance: â€œI want to buy 2 tickets to Cairoâ€
â†’ You tag â€œ2â€ as the entity: TicketQuantity
â†’ CLU learns: numbers near 'tickets' = TicketQuantity
```

âš ï¸ Only available **if** you label training data.

---

## ğŸ“‹ 2. List Component

> Matches exact terms and synonyms from a predefined list

### âœ… Best For:

- Known terms (products, locations, companies)
- Mapping synonyms to a **normalized value**

### ğŸ§ª Example:

```txt
List: ["New York", "London", "Dubai"]
Synonyms: "NYC" â†’ "New York"
Utterance: "I want to fly to NYC"
â†’ Output: "New York"
```

âœ… Supports **multiple languages** in multilingual projects

---

## ğŸ—ï¸ 3. Prebuilt Component

> Built-in recognizers for common entities

### ğŸ Examples of Prebuilt Entities:

- DateTime
- Number
- Currency
- Email
- Location
- Organization

### ğŸ§ª Example:

```txt
Utterance: â€œBook 3 tickets tomorrowâ€
â†’ Prebuilt.Number = â€œ3â€
â†’ Prebuilt.DateTime = â€œtomorrowâ€
```

âš ï¸ Max **5 prebuilt components** per entity

---

## ğŸ” 4. Regex Component

> Uses regular expressions to match patterns in the text

### âœ… Best For:

- ID formats (e.g. "ABC-12345")
- Invoice numbers, ZIP codes, codes

### ğŸ§ª Example:

```txt
Regex: [A-Z]{3}-\d{5}
Utterance: â€œMy order ID is ABC-12345â€
â†’ Match: ABC-12345
```

âœ… Supports language-specific expressions

---

## âš ï¸ What If Multiple Components Detect the Same Thing?

When multiple components (e.g. learned + list) detect overlapping parts, you configure how CLU handles that.

---

## âš–ï¸ Entity Options â€“ Control Overlap Behavior

### ğŸ”— Option 1: **Combine Components** _(Default and Recommended)_

â†’ CLU returns **merged result** with extra info from all components

ğŸ§ª Example:
List component detects: "Proseware OS"
Learned detects: "OS 9"
Utterance: "I want to buy Proseware OS 9"
âœ… Output: `"Proseware OS 9"` (combined info)

---

### ğŸš« Option 2: **Donâ€™t Combine Components**

â†’ CLU returns each match **separately**

ğŸ§ª Example:
Utterance: "Proseware Desktop Pro"

- List: "Proseware Desktop"
- Learned: "Proseware Desktop Pro"
  âœ… Output: **two separate results**

Use this when you want **fine-grained control** or apply different logic per component.

---

## ğŸ”’ Required Components â€“ Forcing Strict Context

You can **mark a component as required**, so that entity is only returned if that component is matched.

### âœ… Useful when:

- You want to ensure prediction is **context-aware**
- Avoiding false positives from list/prebuilt

ğŸ§ª Example:
Entity: `TicketQuantity`

- Components:

  - Prebuilt.Number (finds any number)
  - Learned (trained on ticket-related numbers)

ğŸ” You mark **Learned as required**
â†’ Result will only include TicketQuantity if the **number is near 'tickets'**

---

## ğŸ§  Pro Tips for Entity Strategy

| ğŸ¯ Goal                            | âœ… Use This              |
| ---------------------------------- | ------------------------ |
| Match known values only            | List                     |
| Match known + unknown contextually | List + Learned (combine) |
| Match date/time/number             | Prebuilt                 |
| Match formatted patterns           | Regex                    |
| Restrict to specific meaning       | Use Required components  |

---

## ğŸ“ Example for Exam Scenario

> ğŸ’¬ "Book two tickets tomorrow to Cairo at 3 PM"

You want:

- `"two"` â†’ TicketQuantity
- `"Cairo"` â†’ Destination
- `"3 PM"` â†’ Time

| Entity         | Components                                      |
| -------------- | ----------------------------------------------- |
| TicketQuantity | Prebuilt.Number + Learned (learned is required) |
| Destination    | List                                            |
| Time           | Prebuilt.DateTime                               |

---

## âœ… Summary Table

| Component    | Purpose                     | Smart? | Needs Training? |
| ------------ | --------------------------- | ------ | --------------- |
| **Learned**  | Contextual prediction       | âœ… Yes | âœ… Yes          |
| **List**     | Exact match from dictionary | âŒ No  | âŒ No           |
| **Prebuilt** | Recognizes standard types   | âœ… Yes | âŒ No           |
| **Regex**    | Pattern matching            | âŒ No  | âŒ No           |

---

## ğŸ§ª AI-102 Exam Sample Questions

1. **Q:** You want to extract "two" only when it refers to tickets.
   **A:** Use Learned component + Required

2. **Q:** You have fixed product names + want synonyms like "Pro" for "Proseware Desktop"
   **A:** Use List component

3. **Q:** You want to extract numbers, even without training
   **A:** Use Prebuilt.Number

4. **Q:** You want to extract IDs like â€œORD-98212â€
   **A:** Use Regex
